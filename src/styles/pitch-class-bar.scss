@use "./variables" as *;

.pitch-class-bar {
  flex: none;
  user-select: none;
  width: 100%;
  max-width: 1600px; // Increased to match layout
  margin: 0 auto 0 auto; // Reduced bottom margin
  overflow-x: auto;
  overflow-y: hidden;
  display: flex;
  z-index: 50;
  //margin-bottom: 20px;
  background-color: $background;
  box-shadow: 0 15px 20px rgba(0, 0, 0, 0.6);
  padding-top: 0px;
  position: -webkit-sticky;
  position: sticky;
  top: -1px; // Stick below the navbar within scrollbar container

  &::-webkit-scrollbar {
    height: 2px; // Much thinner
  }

  &::-webkit-scrollbar-thumb {
    background: $gradient-primary;
    border-radius: $space-1;
    cursor: pointer;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
    cursor: pointer;
  }

  &__cell {
    display: flex;
    flex-direction: column;
    justify-content: center; // Center content
    align-items: center;
    flex: none;
    
    // More compact design for better content flow
    border: 1px solid $border-secondary;
    width: 90px; // Reduced from 100px for better fit
    height: 80px; // Reduced from 80px
    margin: 0 $space-1; // Smaller gaps
    border-radius: $space-2;
    background: transparent;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    position: relative;
    padding: $space-2 $space-2 $space-1 $space-2; // Increased top padding

    &:hover {
      background: $glass-light;
      border-color: $border-primary;
      transform: translateY(-2px);
    }
    
    &:focus-visible {
      outline: 2px solid $focus-ring;
      outline-offset: 2px;
    }

    // Simplified states - much less visual noise
    &_selected {
      background: $gradient-primary !important;
      border-color: $primary !important;
      color: $text-primary !important;
    }

    &_active {
      background: $gradient-secondary !important;
      border-color: $tertiary !important;
      color: $text-primary !important;
      transform: translateY(-3px);
      // removed box-shadow for unified styling
    }

    &_tonic {
      border-color: $note-tonic !important;
      // removed box-shadow for unified styling
    }

    &_tonic_current {
      background: rgba($note-tonic, 0.2) !important;
      border-color: $note-tonic !important;
      color: $text-primary !important;
    }

    &_tonic_selected {
      background: $gradient-primary !important;
      border-color: $note-tonic !important;
    }

    &_tonic_current_active {
      background: $gradient-secondary !important; // Use gradient instead of orange
      border-color: $note-tonic !important;
      color: $text-primary !important;
    }

    &_tonic:hover {
      background: rgba($note-tonic, 0.1) !important;
      color: $text-primary !important;
    }

    &_descending {
      background: rgba($primary, 0.2);
      border-color: rgba($primary, 0.5);
    }

    // Simplified MIDI mode - much cleaner
    &_midi_black {
      background: $surface-tertiary !important;
      color: $text-primary;
      border-color: $border-primary;
    }

    &_midi_white {
      background: rgba(255, 255, 255, 0.9) !important;
      color: $background;
      border-color: rgba(255, 255, 255, 0.3);
    }

    &_midi_active {
      background: $gradient-secondary !important;
      color: $text-primary !important;
      transform: translateY(-3px);
      // removed box-shadow for unified styling
    }

    &_midi_tonic_black,
    &_midi_tonic_white {
      border-color: $note-tonic !important;
      // removed box-shadow for unified styling
    }

    &_midi_tonic_current {
      background: rgba($note-tonic, 0.2) !important;
      border-color: $note-tonic !important;
      color: $text-primary !important;
    }

    &_midi_tonic_current_active {
      background: $gradient-secondary !important; // Use gradient instead of orange
      border-color: $note-tonic !important;
      color: $text-primary !important;
    }
  }

  &__cell-label {
    width: 100%;
    text-align: center;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    line-height: $line-height-tight;
    color: inherit;
    opacity: 0.9;
  }

  &__cell-qwerty-englishname {
    width: 100%;
    height: 28px;
    padding-bottom: 0px;
    display: flex;
    flex-direction: row;
    justify-content: center; // Center the content horizontally
    align-items: center;
    gap: 6px; // Slightly increased gap for better spacing
    margin-top: auto;
  }

  &__cell-english {
    line-height: 12px;
    padding: 0px;
    font-size: 12px;
    font-weight: 200;
    text-align: center;
  }

  &__cell-mapping {
    font-size: 10px;
    font-weight: 300;
    border: 1px solid rgb($text, 0.6);
    color: rgb($text, 0.8);
    width: 28px;
    height: 18px;
    padding: 1px 0px 0px 0px;
    margin: 0; // Remove margin to allow flex centering
    text-align: center;
    flex-shrink: 0; // Prevent shrinking
  }
}